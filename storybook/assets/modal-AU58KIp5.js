import{q as L}from"./preact.module-pS-_M4k6.js";import{c as x,_,p as d}from"./create-component-a83A1_Pu.js";import{I as B}from"./icon-cross-32-kKgUD1DN.js";import{c as F}from"./create-class-name-gq91Tlk7.js";import{g as c}from"./get-current-from-ref-KzY6_NOj.js";import{g as H,c as R}from"./create-focus-trap-key-down-handler-_kplv3kG.js";import{I}from"./icon-button-UahFBS6G.js";import{T as k}from"./text-SssoFudj.js";import{u as n}from"./jsxRuntime.module-mP9ZGqev.js";const D="_modal_1pejl_1",K="_noTransition_1pejl_10",M="_center_1pejl_14",P="_open_1pejl_24",q="_bottom_1pejl_29",z="_left_1pejl_39",N="_right_1pejl_49",S="_topBar_1pejl_59",$="_closeButtonLeft_1pejl_69",A="_title_1pejl_73",C="_overlay_1pejl_78",l={modal:D,noTransition:K,center:M,open:P,bottom:q,left:z,right:N,topBar:S,closeButtonLeft:$,title:A,overlay:C},O=x(function({children:y,closeButtonIcon:h=n(B,{}),closeButtonPosition:v="right",open:r,transition:w=!0,onCloseButtonClick:a,onEscapeKeyDown:m,onOverlayClick:p,position:E="center",title:f,...g},b){const i=_(null),T=_([]),u=_(null);return d(function(){const e=document.createElement("div");return document.body.appendChild(e),i.current=e,function(){document.body.removeChild(e)}},[]),d(function(){const e=c(i),o=R(e);function t(s){r===!0&&o(s)}return window.addEventListener("keydown",t),function(){window.removeEventListener("keydown",t)}},[r]),d(function(){function e(o){const t=c(T),s=c(i);r===!1||o.key!=="Escape"||typeof m>"u"||t[t.length-1]!==s||m(o)}return window.addEventListener("keydown",e),function(){window.removeEventListener("keydown",e)}},[r,m]),d(function(){const e=c(T),o=c(i),t=document.body;if(r===!0){if(e.length===0){const j=t.scrollHeight>window.innerHeight;t.style.cssText+=`position:fixed;overflow-y:${j===!0?"scroll":"hidden"};width:100%;`}e.push(o),o.style.cssText="position:absolute;top:0;left:0;bottom:0;right:0;z-index:1",u.current=document.activeElement;const s=H(o);s.length>0?s[0].focus():u.current.blur()}else e.length===1&&(t.style.removeProperty("position"),t.style.removeProperty("overflow-y"),t.style.removeProperty("width")),e.pop(),o.style.cssText="position:static";return function(){u.current!==null&&u.current.focus()}},[r]),d(function(){const e=c(i);L(n("div",{ref:b,children:[n("div",{...g,class:F([l.modal,r===!0?l.open:null,w===!1?l.noTransition:null,l[E]]),children:[y,typeof a>"u"&&typeof f>"u"?null:n("div",{class:l.topBar,children:[n("div",{class:l.title,children:typeof f>"u"?null:n(k,{children:n("strong",{children:f})})}),typeof a>"u"?null:n("div",{class:v==="left"?l.closeButtonLeft:void 0,children:n(I,{onClick:a,children:h})})]})]}),n("div",{class:l.overlay,onClick:typeof p>"u"?void 0:p})]}),e)},[y,h,v,a,p,r,E,b,g,f,w]),null});export{O as M};
